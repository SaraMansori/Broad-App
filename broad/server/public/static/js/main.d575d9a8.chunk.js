(this["webpackJsonpnew-app-client"]=this["webpackJsonpnew-app-client"]||[]).push([[0],{277:function(e,t,n){},313:function(e,t,n){},498:function(e,t,n){},499:function(e,t,n){"use strict";n.r(t);var a,i,c,r,s,o,l,d,u,j,h,b,x,p,O,g,m,f,v,y,w,k,E,C,N,R,I,F,S,D,T,U,A,B,L,P,q=n(1),G=n.n(q),z=n(60),M=n.n(z),H=(n(277),n(2)),_=n(3),W=n(7),J=G.a.createContext(!1),Y=J.Provider,V=J,K="/signup",Q="/login",X="/profile",Z="/profile/edit",$="/requests",ee="/chats",te=n(14),ne=n(506),ae=n(507),ie=n(252),ce=n(28),re=n(29),se=n.n(re),oe=function e(){var t=this;Object(ce.a)(this,e),this.getBooks=function(e){return t.instance.get("/search-book/".concat(e))},this.getBooksByType=function(e,n){return t.instance.get("/search-book-by/".concat(e,"/").concat(n))},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/books"),withCredentials:!0})},le=n(505),de=n(250),ue=n(251),je=n(0),he=function(e){var t=Object(q.useState)(""),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(te.g)();return Object(je.jsx)("form",{onSubmit:function(t){"books"===e.type?(t.preventDefault(),e.searchType?a?c.push("/book-results/".concat(e.searchType,"/").concat(a)):c.push("/book-results/".concat(e.searchType,"/+")):a?c.push("/book-results/title/".concat(a)):c.push("/book-results/+"),i("")):"exchange"===e.type&&(e.searchType?a?c.push("/book-exchange/".concat(e.searchType,"/").concat(a)):c.push("/book-results/".concat(e.searchType,"/+")):a?c.push("/book-exchange/title/".concat(a)):c.push("/book-exchange/"))},children:Object(je.jsxs)(le.a,{children:[Object(je.jsx)(de.a,{placeholder:"exchange"===e.type?"Find the books you want to exchange...":"Find your favorite books...","aria-label":"search","aria-describedby":"search",style:{width:"42vw"},name:"text",value:a,onChange:function(e){return function(e){i(e.target.value)}(e)}}),Object(je.jsx)(ue.a,{type:"submit",variant:"secondary",children:"Search"})]})})},be=n(510),xe=function(e){var t=e.type,n=e.handleRadioClick;return Object(je.jsxs)(be.a,{className:"mt-2 mb-5",children:[Object(je.jsx)(be.a.Check,{inline:!0,label:"Search By Title",name:"group1",type:"radio",id:"inline-radio-1",value:"title",onClick:function(e){return n(e)}}),Object(je.jsx)(be.a.Check,{inline:!0,label:"Search By Author",name:"group1",type:"radio",value:"author",id:"inline-radio-2",onClick:function(e){return n(e)}}),"exchange"!==t&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(be.a.Check,{inline:!0,label:"Search By Genre",name:"group1",type:"radio",value:"category",id:"inline-radio-2",onClick:function(e){return n(e)}}),Object(je.jsx)(be.a.Check,{inline:!0,label:"Search By ISBN",name:"group1",type:"radio",value:"isbn",id:"inline-radio-2",onClick:function(e){return n(e)}})]})]})},pe=n(512),Oe=n(62),ge={bookCover:"https://i.imgur.com/sJ3CT4V.gif",profilePicture:""},me=function e(){var t=this;Object(ce.a)(this,e),this.updateSignupInfo=function(e,n,a,i){return t.instance.put("/edit/signup-info",{name:e,description:n,profileImage:a,location:i})},this.updateFavoriteGenres=function(e){return t.instance.put("/edit/genres",{favoriteGenres:e})},this.getUsers=function(){return t.instance.get("/")},this.deleteFriend=function(e){return t.instance.put("/delete-friend",{friendId:e})},this.updateUserBooks=function(e){return t.instance.put("/update/books",{book:e})},this.getUserInfo=function(e){return t.instance.get("/".concat(e))},this.editUserInfo=function(e,n,a,i,c){return t.instance.put("/edit/profile",{name:e,email:n,description:a,profileImage:i,location:c})},this.getBooksToExchange=function(){return t.instance.get("/books-to-exchange")},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/users"),withCredentials:!0})},fe=function(e){var t,n=e.book,a=Object(q.useContext)(V),i=a.loggedUser,c=a.storeUser,r=Object(q.useState)(!1),s=Object(_.a)(r,2),o=s[0],l=s[1];Object(q.useEffect)((function(){i&&l(i.books.some((function(e){return e.id===n.id&&e.wantsToExchange})))}),[i]);var d=n.id,u=n.volumeInfo,j=u.imageLinks,h=u.title,b=u.authors,x=0!==(null===(t=n.volumeInfo.publishedDate)||void 0===t?void 0:t.length)?n.volumeInfo.publishedDate:"Unknown",p=new me,O=function(e){var t={id:d,status:e.target.dataset.status};p.updateUserBooks(t).then((function(e){console.log(e.data),c(e.data)})).catch((function(e){return console.error(e)}))};return Object(je.jsx)(ie.a,{children:Object(je.jsxs)(pe.a,{style:{height:"100%"},children:[Object(je.jsx)(pe.a.Img,{className:"p-4",style:{maxHeight:"200px",objectFit:"contain"},variant:"top",src:(null===j||void 0===j?void 0:j.thumbnail)?j.thumbnail:ge.bookCover}),Object(je.jsxs)(pe.a.Body,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(je.jsx)(pe.a.Title,{children:(null===h||void 0===h||h.length,h)}),b&&Object(je.jsx)(pe.a.Text,{children:(null===b||void 0===b?void 0:b.length)>1?b.map((function(e,t){return t!==b.length-1?"".concat(e,", "):e})):b[0]}),Object(je.jsxs)(pe.a.Text,{children:["Published: ",x]}),Object(je.jsxs)("div",{className:"buttonsList",children:[Object(je.jsx)(ue.a,{style:{width:"100%"},variant:"secondary",onClick:function(e){return function(e){var t={id:d,wantsToExchange:!o};p.updateUserBooks(t).then((function(e){console.log(e.data),l(!o),c(e.data)})).catch((function(e){return console.error(e)}))}()},children:o?"I don't want to exchange this book anymore":"I have this book and want to exchange it"}),Object(je.jsxs)(Oe.a,{children:[Object(je.jsx)(Oe.a.Toggle,{variant:"primary",style:{width:"100%"},className:"mt-2",children:"Add to my library"}),Object(je.jsxs)(Oe.a.Menu,{variant:"dark",style:{width:"100%"},children:[Object(je.jsx)(Oe.a.Item,{"data-status":"WANTSTOREAD",onClick:function(e){return O(e)},children:"Want to Read"}),Object(je.jsx)(Oe.a.Item,{"data-status":"READING",onClick:function(e){return O(e)},children:"Reading"}),Object(je.jsx)(Oe.a.Item,{"data-status":"READ",onClick:function(e){return O(e)},children:"Read"})]})]})]})]})]})})},ve=new oe,ye=function(){var e=Object(te.i)().text,t=Object(q.useState)("title"),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(q.useState)([]),r=Object(_.a)(c,2),s=r[0],o=r[1],l=Object(te.h)();return Object(q.useEffect)((function(){ve.getBooksByType(a,e.replaceAll(" ","+")).then((function(e){o(e.data)})).catch((function(e){return console.error(e)}))}),[e,l]),Object(je.jsxs)(ne.a,{children:[Object(je.jsx)(ae.a,{children:Object(je.jsxs)(ie.a,{style:{marginBottom:"10px"},children:[Object(je.jsx)("h1",{className:"mb-5 text-center",children:"These are your results"}),Object(je.jsx)(he,{type:"books",searchType:a}),Object(je.jsx)(xe,{handleRadioClick:function(e){i(e.target.value)}})]})}),s&&Object(je.jsx)(ae.a,{xs:1,md:3,className:"g-5",children:s.map((function(e,t){return Object(je.jsx)(fe,{book:e},"".concat(e,"-").concat(t))}))})]})},we=function(){return Object(je.jsx)(je.Fragment,{children:Object(je.jsx)(te.b,{exact:!0,path:"/book-results/:category/:text",render:function(){return Object(je.jsx)(ye,{searchType:"text"})}})})},ke=n(9),Ee=n(10),Ce=n.p+"static/media/vanreading.304905a2.png",Ne=n.p+"static/media/bookcover.cba3f3eb.jpg",Re=Object(Ee.a)(ue.a)(a||(a=Object(ke.a)(["\nwidth: 250px;\nheight: 40px;\ntext-align: center;\nfont-weight: 500;\nfont-size: 20px;\n"]))),Ie=Ee.a.h2(i||(i=Object(ke.a)([" \nfont-size: 2.8rem;\n"]))),Fe=Ee.a.h6(c||(c=Object(ke.a)([" \nfont-size: 1.8rem;\n"]))),Se=Ee.a.div(r||(r=Object(ke.a)(["\n  height: 480px;\n  width: 850px;\n  border-bottom-right-radius: 20px;\n  box-shadow: 2px 2px 2px 2px #805d93;\n  background-image: url(",");\n  background-size: cover;\n  background-position-y: 56%;\n\n  @media (max-width: 1185px) {\n  width: 100vw;\n  height: 30vh;\n  border-radius: 0px;\n  }\n\n"])),Ce),De=Ee.a.div(s||(s=Object(ke.a)(["\n\nposition: absolute;\nwidth: 535px;\nheight: 200px;\nright: 50px;\ntop: 100px;\ncolor: #613175; \nbackground: #FFFFFF;\nborder-radius: 50px;\nfont-weight: normal;\nfont-size: 48px;\nline-height: 60px;\ntext-align:center;\nbox-shadow: 2px 2px 2px 2px #805d93;\npadding:40px; \nz-index: 1;\n\n@media (max-width: 1185px) {\n    right: 14px;\n    top: 69px;\n    font-size: 18px;\n    width: 198px;\n    height: 80px;\n    line-height: 26px;\n    border-radius: 30px;\n    padding: 15px;\n  \n  }\n\n"]))),Te=Ee.a.div(o||(o=Object(ke.a)(["\n\ndisplay:initial;\nposition: absolute;\nwidth: 441px;\nheight: 144px;\nright: 80px;\ntop: 273px;\nbackground: #805D93;\nborder-radius: 50px;\ncolor: #FFFFFF; \nfont-weight: normal;\nfont-size: 20px;\nline-height: 25px;\ntext-align:center;\nbox-shadow: 1px 1px 1px 1px #169873;\npadding:44px; \n\n@media (max-width: 1185px) {\ndisplay: none; \n}  \n\n@media (min-width: 1250px) {\nright: 230px;\ntop: 268px;\n  }\n\n"]))),Ue=Ee.a.div(l||(l=Object(ke.a)(["\nposition: absolute;\nright: 62px;\ntop: 449px;\ntext-align: center;\nfont-weight: 600;\nfont-size: 20px;\nline-height: 25px;\npadding: 5px;\nbackground-color: #f4e7de;\nborder-radius: 20px;\ndisplay: none;\n\n@media (min-width: 1185px) {\n  display: initial;\n}\n\n@media (min-width: 1296px) {\n  font-size: 24px;\n      }\n@media (min-width: 1250px) {\n  right: 32px;\n  }\n\n"]))),Ae=Object(Ee.a)(Re)(d||(d=Object(ke.a)(["\ndisplay: none;\nposition: absolute;\nright: 30px;\ntop: 500px;\nborder-radius:15px;\n\n@media (min-width: 1185px) {\n  right: 77px;\n  display: initial;\n    }"]))),Be=Object(Ee.a)(Re)(u||(u=Object(ke.a)(["\ndisplay: none;\nposition: static;\nborder-radius:15px;\n\n@media (max-width: 1185px) {\n  display: initial;\n    }"]))),Le=Ee.a.div(j||(j=Object(ke.a)(["\nposition: absolute;\nwidth: 298px;\nbackground: #FFFFFF;\nborder-style:solid;\nborder-width: 1px;\nborder-color: rgba(0, 0, 0, 0.25);\nbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\nborder-radius: 20px;\nfont-weight: normal;\nfont-size: 13px;\nline-height: 19px;\nfont-weight:500;\ntext-align:center;\npadding:20px;\ndisplay: flex;\nalign-items: center;\nz-index: 1;\ndisplay:none;\n\n@media (min-width: 1250px) {\n    display: initial;\n  }\n"]))),Pe=Object(Ee.a)(Le)(h||(h=Object(ke.a)(["\nleft: 20px;\ntop: 445px;\n"]))),qe=Object(Ee.a)(Le)(b||(b=Object(ke.a)(["\nleft: 280px;\ntop: 570px;\n"]))),Ge=Object(Ee.a)(Le)(x||(x=Object(ke.a)(["\nleft: 435px;\ntop: 443px;\nmin-height: 114px;\n"]))),ze=Ee.a.div(p||(p=Object(ke.a)(["\ndisplay: block;\n\n@media (max-width:1185px) {  \nmargin-top: 20px;\nmargin-bottom: 20px;  \ndisplay: flex;\nflex-direction: column-reverse;\nalign-items: center;\nflex-wrap: wrap;\njustify-content: center;\n}\n\n"]))),Me=Ee.a.div(O||(O=Object(ke.a)([' \npadding: 50px 40px 50px 40px;\nbox-sizing: border-box;\nborder-radius: 50px;\nbackground: #159772;\nwidth: 95%;\ndisplay: flex;\nflex-direction: row;\nflex-wrap: wrap;\njustify-content: center;\n \n\n\n@media (min-width:1185px) {\nposition: absolute;\nwidth: 590px;\ndisplay: grid; \ngrid-template-columns: 0.7fr 1.3fr; \ngrid-template-rows: 1fr; \ngap: 0px 15px; \nalign-items: center;\njustify-items: center;\ngrid-template-areas: "img text";\nmin-height: 400px;\nleft: 0px;\ntop: 500px;\nborder-radius: 0px;\nborder-top-right-radius: 50px;\nborder-bottom-right-radius: 50px;\n}\n\n@media (min-width: 1240px) {\n  top: 625px;\n  width: 630px;\n  }\n\n@media (min-width: 1300px){\n  width: 650px;\n  }\n\n']))),He=Ee.a.div(g||(g=Object(ke.a)(["\ngrid-area: img;\nheight: 307px;\nwidth: 200px;\nborder-style: solid;\nborder-width: 6px;\nborder-color: #FFFFFF;\nbackground-image: url(",");\nbackground-size: cover;\nbackground-position: center;\n\n@media (max-width:1185px) {\nmargin-bottom: 10px;\n}\n"])),Ne),_e=Ee.a.div(m||(m=Object(ke.a)(["\ngrid-area: text;\ncolor: #FFFFFF;\nfont-size: 1.5rem;\n"]))),We=Ee.a.div(f||(f=Object(ke.a)(["\npadding: 50px 40px 50px 40px;\nwidth: 95%;\nbackground: #805d93;\nborder-radius: 50px;\ncolor: #FFFFFF;\nmargin-bottom: 10px;\n\n\n@media (min-width: 1185px) {\nposition: absolute;\nwidth: 590px;\nmin-height: 540px;\nright: 0px;\ntop: 586px;\nborder-radius: 0px;\nborder-top-left-radius: 50px;\nborder-bottom-left-radius: 50px;\n\n}\n\n@media (min-width: 1300px){\n  width: 650px;\n  }\n\n"]))),Je=Ee.a.div(v||(v=Object(ke.a)(["\ndisplay: flex;\njustify-content: flex-start;\ncolor: #FFFFFF;\nfont-size: 1.4rem;\nbox-sizing: border-box;\n"]))),Ye=Ee.a.div(y||(y=Object(ke.a)(["\ncolor: #FFFFFF;\nfont-size: 1.4rem;\n"]))),Ve=Object(Ee.a)(Ye)(w||(w=Object(ke.a)(["\ncolor: #FFFFFF;\nfont-size: 1.4rem;\npadding-left: 8px;\n"]))),Ke=n(95),Qe=function(){return Object(je.jsxs)("div",{style:{marginTop:"-30px"},children:[Object(je.jsx)(Se,{}),Object(je.jsxs)(De,{children:["welcome to ",Object(je.jsxs)("strong",{children:["Broad",Object(je.jsx)("br",{}),"the books' road"]})]}),Object(je.jsxs)(Te,{children:["The only place where your ",Object(je.jsx)("strong",{children:"books"})," can find their way to a ",Object(je.jsx)("strong",{children:"new life"})," !"]}),Object(je.jsx)(Ue,{children:"Ready to start your journey?"}),Object(je.jsx)(Ae,{className:"button-link",as:W.b,to:K,type:"submit",children:"Hit the Road"}),Object(je.jsx)(Ge,{children:"\u201cNothing of me is original. I am the combined effort of everyone I've ever known.\u201d (Chuck Palahniuk)"}),Object(je.jsxs)(Pe,{children:["\u201cRead, read, read. Read everything - trash, classics, good and bad, and see how they do it. Just like a carpenter who works as an apprentice and studies the master...\u201d",Object(je.jsx)("br",{}),"(William Faulkner)"]}),Object(je.jsxs)(qe,{children:['"Leap and the net will appear."',Object(je.jsx)("br",{}),"(John Burroughs)"]}),Object(je.jsxs)(ze,{children:[Object(je.jsxs)(Me,{children:[Object(je.jsx)(He,{}),Object(je.jsxs)(_e,{children:[Object(je.jsx)(Ie,{style:{textAlign:"center"},children:"Book of the week"}),Object(je.jsx)(Fe,{style:{textAlign:"center"},children:"The Picture of Dorian Gray"}),Object(je.jsx)("br",{}),Object(je.jsxs)("p",{children:[Object(je.jsx)("strong",{children:"Dorian Gray"})," is the subject of a full-length portrait in oil by Basil Hallward, an artist impressed and infatuated by Dorian's beauty; he believes that Dorian's beauty is responsible for the new mood in his art as a painter."]}),Object(je.jsx)("p",{children:"Through Basil, Dorian meets Lord Henry Wotton, and he soon is enthralled by the aristocrat's hedonistic world view: that beauty and sensual fulfilment are the only things worth pursuing in life."})]})]}),Object(je.jsxs)(We,{children:[Object(je.jsxs)(Je,{children:[Object(je.jsx)(Ye,{children:Object(je.jsx)(Ie,{children:"\ud83d\udd6e"})}),Object(je.jsxs)(Ve,{children:[Object(je.jsx)(Ie,{children:"Create your library"}),Object(je.jsx)(Fe,{children:"Recreate your library with your favorite titles, the ones you've read, the ones you're reading at the moment, and those you wish to read"})]})]}),Object(je.jsx)("br",{}),Object(je.jsxs)(Je,{children:[Object(je.jsx)(Ye,{children:Object(je.jsx)(Ie,{children:"\ud83d\uddd8"})}),Object(je.jsxs)(Ve,{children:[Object(je.jsx)(Ie,{children:"Bookswapping!"}),Object(je.jsx)(Fe,{children:"Exchange your books with other users, and give them a new life... Sharing is caring, and it's completely free!"})]})]}),Object(je.jsx)("br",{}),Object(je.jsxs)(Je,{children:[Object(je.jsx)(Ye,{children:Object(je.jsx)(Ie,{children:"\ud83d\udde9"})}),Object(je.jsxs)(Ve,{children:[Object(je.jsx)(Ie,{children:"Quotes"}),Object(je.jsx)(Fe,{children:"Discover, create and share the best quotes of all times! Vote the ones you like, and save them in your collection."})]})]}),Object(je.jsx)("br",{}),Object(je.jsxs)(Je,{children:[Object(je.jsx)(Ye,{children:Object(je.jsx)(Ie,{children:"\ud83d\uddf9"})}),Object(je.jsxs)(Ve,{children:[Object(je.jsx)(Ie,{children:"Challenges"}),Object(je.jsx)(Fe,{children:"Take your reading to the next level, and set your personal goals... Challenge accepted?"})]})]}),Object(je.jsx)("br",{}),Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Fe,{onClick:function(){return Object(Ke.b)("Here is your toast.")},style:{textAlign:"center"},children:"This and much more awaits for you on Broad!"}),Object(je.jsx)(Ke.a,{})]}),Object(je.jsx)("br",{}),Object(je.jsx)("p",{style:{textAlign:"center"},children:Object(je.jsx)(Be,{className:"button-link",as:W.b,to:K,type:"submit",children:"Hit the Road"})})]})]})]})},Xe=n(12),Ze=function e(){var t=this;Object(ce.a)(this,e),this.signup=function(e,n,a){return t.instance.post("/signup",{email:e,username:n,pwd:a})},this.login=function(e,n){return t.instance.post("/login",{username:e,pwd:n})},this.logout=function(){return t.instance.get("/logout")},this.isLoggedIn=function(){return t.instance.post("/is-logged-in")},this.refreshSession=function(){return t.instance.post("/refresh-session")},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/auth"),withCredentials:!0})},$e=new Ze,et=function(e){var t=Object(q.useState)({username:"",pwd:""}),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(te.g)(),r=Object(q.useContext)(V).storeUser,s=function(e){var t=e.target,n=t.name,c=t.value;i(Object(H.a)(Object(H.a)({},a),{},Object(Xe.a)({},n,c)))};return Object(je.jsxs)(ne.a,{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(je.jsx)("h3",{children:"Log In"}),Object(je.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=a.username,n=a.pwd;$e.login(t,n).then((function(e){r(e.data),c.push("/"),i({username:"",pwd:""})})).catch((function(e){return console.error(e)}))},children:Object(je.jsxs)(le.a,{style:{display:"inline-block"},children:[Object(je.jsx)(de.a,{style:{width:"300px",margin:"15px"},placeholder:"Username...","aria-label":"username","aria-describedby":"username",name:"username",type:"text",value:a.username,onChange:function(e){return s(e)}}),Object(je.jsx)(de.a,{style:{width:"300px",margin:"15px"},placeholder:"Password...","aria-label":"password","aria-describedby":"password",name:"pwd",type:"password",value:a.pwd,onChange:function(e){return s(e)}}),Object(je.jsx)(ue.a,{className:"block-button",type:"submit",variant:"primary",children:"Log In"})]})}),Object(je.jsx)(W.b,{className:"plain-link",to:"#",children:"Forgot password?"}),Object(je.jsx)("br",{}),Object(je.jsx)("h6",{children:"Don't have an account?"}),Object(je.jsx)(ue.a,{className:"block-button",as:W.b,to:K,type:"submit",variant:"primary",children:"Sign Up"})]})},tt=new Ze,nt=function(){var e=Object(q.useState)({email:"",username:"",pwd:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],i=Object(q.useState)(),c=Object(_.a)(i,2),r=c[0],s=(c[1],Object(te.g)()),o=Object(q.useContext)(V).storeUser,l=function(e){var t=e.target,i=t.value,c=t.name;a(Object(H.a)(Object(H.a)({},n),{},Object(Xe.a)({},c,i)))};return Object(je.jsxs)(ne.a,{className:"d-flex justify-content-center flex-column align-items-center",children:[r,Object(je.jsx)("h3",{children:"Sign Up"}),Object(je.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=n.email,i=n.username,c=n.pwd;tt.signup(t,i,c).then((function(e){o(e.data.user),s.push("/signup/genres"),a({email:"",username:"",pwd:""}),s.push("/")})).catch((function(e){return function(e){return console.error(e)}}))},children:Object(je.jsxs)(le.a,{style:{display:"inline-block"},children:[Object(je.jsx)(de.a,{style:{width:"300px",margin:"15px"},placeholder:"E-mail...","aria-label":"email","aria-describedby":"email",name:"email",type:"text",value:n.email,onChange:function(e){return l(e)}}),Object(je.jsx)(de.a,{style:{width:"300px",margin:"15px"},placeholder:"Username...","aria-label":"username","aria-describedby":"username",name:"username",type:"text",value:n.username,onChange:function(e){return l(e)}}),Object(je.jsx)(de.a,{style:{width:"300px",margin:"15px"},placeholder:"Password...","aria-label":"password","aria-describedby":"password",name:"pwd",type:"password",value:n.pwd,onChange:function(e){return l(e)}}),Object(je.jsx)(ue.a,{className:"block-button",type:"submit",variant:"primary",children:"Sign Up"})]})}),Object(je.jsx)("h6",{children:"Already have an account?"}),Object(je.jsx)(ue.a,{className:"block-button",as:W.b,to:Q,type:"submit",variant:"primary",children:"Log In"})]})},at=function e(){var t=this;Object(ce.a)(this,e),this.uploadImg=function(e){return t.instance.post("/image",e)},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/uploads"),withCredentials:!0})},it=new me,ct=new at,rt=function(e){var t=Object(te.g)(),n=Object(q.useState)({name:"",description:"",profileImage:"",location:""}),a=Object(_.a)(n,2),i=a[0],c=a[1],r=function(e){var t=e.target,n=t.name,a=t.value;c(Object(H.a)(Object(H.a)({},i),{},Object(Xe.a)({},n,a)))};return Object(je.jsxs)(ne.a,{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(je.jsx)(ae.a,{className:"d-flex justify-content-center",children:Object(je.jsxs)(ie.a,{children:[Object(je.jsx)("h3",{children:"Last step! Now complete your data \u2728"}),Object(je.jsx)(be.a,{onSubmit:function(e){e.preventDefault();var n=i.name,a=i.description,r=i.profileImage,s=i.location;it.updateSignupInfo(n,a,r,s).then((function(){t.push("/profile"),c({name:"",description:"",profileImage:"",location:""})})).catch((function(e){return console.error(e)}))},children:Object(je.jsxs)(le.a,{style:{display:"inline-block"},children:[Object(je.jsx)(de.a,{style:{width:"100%",margin:"15px 0px"},placeholder:"Name...","aria-label":"name","aria-describedby":"name",name:"name",type:"text",autoFocus:!0,value:i.name,onChange:r}),Object(je.jsx)(be.a.Control,{style:{width:"100%",margin:"15px 0px"},placeholder:"Description...","aria-label":"description","aria-describedby":"description",name:"description",type:"text",as:"textarea",rows:6,value:i.description,onChange:r}),Object(je.jsx)(de.a,{style:{width:"100%",margin:"15px 0px"},placeholder:"Location...","aria-label":"location","aria-describedby":"location",name:"location",type:"text",value:i.location,onChange:r}),Object(je.jsx)("p",{children:"Profile image"}),Object(je.jsxs)("div",{className:"d-flex flex-column",children:[Object(je.jsx)("input",{style:{maxWidth:"60vw"},type:"file",id:"profileImage","aria-label":"Profile image",name:"profileImage",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return function(e){c(Object(H.a)(Object(H.a)({},i),{},{isLoading:!0}));var t=new FormData;t.append("imageData",e.target.files[0]),ct.uploadImg(t).then((function(e){return c(Object(H.a)(Object(H.a)({},i),{},{isLoading:!1,profileImage:e.data.cloudinary_url}))})).catch((function(e){return console.error(e)}))}(e)}}),Object(je.jsx)(ue.a,{size:"sm",style:{marginTop:"15px"},disabled:i.isLoading,type:"submit",variant:"primary",children:"Save Data"})]})]})})]})}),Object(je.jsx)(W.b,{to:"/profile",className:"plain-link",style:{margin:"15px 0px"},type:"submit",variant:"primary",children:"Skip"})]})},st=n(53),ot=["TRAVEL","KIDS","BUSINESS","ART","BIOGRAPHY","CLASSICS","COMICS","CRIME","COOKBOOKS","COOKING","FANTASY","FICTION","QUEER","HISTORY","HORROR","COMEDY","MANGA","MUSIC","MYSTERY","NONFICTION","PARANORMAL","PHILOSOPHY","POETRY","PSYCHOLOGY","RELIGION","ROMANCE","SCIENCE","SCIENCE FICTION","SELFHELP","SPORTS","SPIRITUALITY","THRILLER","YOUNGADULT","SUSPENSE","PHOTOGRAPHY","POLITICS"],lt=new me,dt=function(e){var t,n=Object(q.useState)([]),a=Object(_.a)(n,2),i=a[0],c=a[1],r=Object(te.g)();return Object(je.jsx)(ne.a,{children:Object(je.jsx)(ae.a,{className:"d-flex justify-content-center",children:Object(je.jsxs)(ie.a,{md:6,xs:12,children:[Object(je.jsx)("h2",{className:"mb-5",children:"Choose your favorite genres \ud83d\udcda "}),Object(je.jsxs)("form",{onSubmit:function(e){e.preventDefault(),lt.updateFavoriteGenres(i).then((function(){r.push("/signup/info"),c([])})).catch((function(e){return console.error(e)}))},children:[Object(je.jsx)("div",{className:"buttonsList",style:{display:"flex",flexWrap:"wrap",gap:"5px"},children:ot.map((function(e,t){return Object(je.jsx)(ue.a,{onClick:function(e){return function(e){var t=e.target.innerText;i.includes(t)?c((function(e){return e.filter((function(e){return e!==t}))})):c((function(e){return[].concat(Object(st.a)(e),[t])}))}(e)},style:{flexGrow:"1"},variant:(null===i||void 0===i?void 0:i.includes(e))?"primary":"secondary",children:e},"genre".concat(t))}))}),Object(je.jsx)(ue.a,{type:"submit",className:"mt-4",style:{width:"100%"},variant:"primary",children:"SUBMIT"}),Object(je.jsx)(W.b,(t={to:"/signup/info",className:"plain-link mt-4",style:{width:"100%",margin:"auto"},as:W.b},Object(Xe.a)(t,"to","#"),Object(Xe.a)(t,"type","submit"),Object(Xe.a)(t,"variant","primary"),Object(Xe.a)(t,"children",Object(je.jsx)("p",{style:{textAlign:"center"},children:"Skip"})),t))]})]})})})},ut=function e(){var t=this;Object(ce.a)(this,e),this.getRequests=function(){return t.instance.get("/")},this.manageRequest=function(e,n){return t.instance.put("/",{id:e,status:n})},this.createRequest=function(e,n,a){return t.instance.post("/",{receiver:e,type:n,book:a})},this.deleteRequest=function(e,n){return t.instance.delete("/",{data:{otherUserId:e,type:n}})},this.getRequest=function(e,n){return t.instance.get("/".concat(n,"?otherUserId=").concat(e))},this.getExchangeRequest=function(e,n){return t.instance.get("/exchange?otherUserId=".concat(e,"&bookId=").concat(n))},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/requests"),withCredentials:!0})},jt=new ut,ht=function(e){var t=e._id,n=e.owner,a=e.book,i=e.getRequests,c=function(e){e.preventDefault();var n=e.target.dataset.status;jt.manageRequest(t,n).then((function(){return i()})).catch((function(e){return console.error(e)}))};return Object(je.jsx)(ae.a,{children:Object(je.jsx)(ie.a,{md:3,style:{marginTop:"10px"},children:Object(je.jsxs)(ae.a,{className:"request-card mb-3",children:[Object(je.jsx)("p",{children:Object(je.jsx)("b",{children:null===a||void 0===a?void 0:a.title})}),Object(je.jsx)(ie.a,{className:"col-3",children:Object(je.jsx)(W.b,{className:"plain-link",to:"/users/".concat(n._id),children:n.username})}),Object(je.jsxs)(ie.a,{className:"col-8",children:[Object(je.jsx)(ue.a,{onClick:c,"data-status":"ACCEPTED",variant:"secondary",style:{marginRight:"3px"},children:"Accept"}),Object(je.jsx)(ue.a,{onClick:c,"data-status":"REJECTED",variant:"primary",children:"Reject"})]})]})})})},bt=function(e){var t=e.getRequests,n=e.requests,a=n.filter((function(e){return"FRIENDSHIP"===e.type})),i=n.filter((function(e){return"EXCHANGE"===e.type})),c=function(e){return e.map((function(e){return Object(je.jsx)(ht,Object(H.a)(Object(H.a)({},e),{},{getRequests:t}),e._id)}))};return Object(je.jsxs)(je.Fragment,{children:[a.length>0&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h2",{className:"mt-5",children:"Friendship Requests"}),c(a)]}),i.length>0&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h2",{className:"mt-5",children:"Exchange Requests"}),c(i)]})]})},xt=new ut,pt=function(e){var t=Object(q.useState)(null),n=Object(_.a)(t,2),a=n[0],i=n[1],c=function(){xt.getRequests().then((function(e){return i(e.data)})).catch((function(e){return console.error(e)}))};return Object(q.useEffect)((function(){c()}),[]),Object(je.jsxs)(ne.a,{children:[Object(je.jsx)("h1",{className:"mb-5",children:"My Requests"}),(null===a||void 0===a?void 0:a.length)?Object(je.jsx)(bt,{getRequests:c,requests:a}):Object(je.jsx)("p",{children:"No pending requests."})]})},Ot=Ee.a.div(k||(k=Object(ke.a)(["\n  color: #FFFFFF;\n  text-align: center;\n  background-repeat: no-repeat;\n  border-radius: 15px;\n  background-size: cover; \n  height: 20vh; \n  background-image: url(https://images.unsplash.com/photo-1473755504818-b72b6dfdc226?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1074&q=80)\n"]))),gt=Ee.a.div(E||(E=Object(ke.a)(["\n  height: 200px; \n  width: 200px; \n  border-radius: 50%; \n  border: 3px solid white;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  margin-bottom: 15px;\n"])),(function(e){return e.image})),mt=new me,ft=new ut,vt=function(e){var t=e.getUsers,n=e.user,a=Object(q.useState)(null),i=Object(_.a)(a,2),c=i[0],r=i[1],s=Object(q.useState)(""),o=Object(_.a)(s,2),l=o[0],d=o[1],u=Object(q.useState)(!1),j=Object(_.a)(u,2),h=j[0],b=j[1],x=Object(q.useContext)(V),p=x.loggedUser,O=x.storeUser,g=null===p||void 0===p?void 0:p._id,m="FRIENDSHIP";Object(q.useEffect)((function(){y()}),[]),Object(q.useEffect)((function(){E()}),[c]),Object(q.useEffect)((function(){v()}),[n]);var f=function(e,n){e.preventDefault(),n.then((function(){return y(),t(),mt.getUserInfo(g)})).then((function(e){return O(e.data)})).catch((function(e){return console.error(e)}))},v=function(){return b(n.friends.includes(g))},y=function(){ft.getRequest(n._id,m).then((function(e){e.data?r(e.data):(r(null),d(""))})).catch((function(e){return console.error(e)}))},w=function(){return c.owner===g},k=function(){return c.owner===n._id},E=function(){"PENDING"===(null===c||void 0===c?void 0:c.status)&&w()?d("PENDING OWNER"):"PENDING"===(null===c||void 0===c?void 0:c.status)&&k()?d("PENDING RECEIVER"):"REJECTED"===(null===c||void 0===c?void 0:c.status)&&w()?d("REJECTED OWNER"):"REJECTED"===(null===c||void 0===c?void 0:c.status)&&k()&&d("REJECTED RECEIVER")};return Object(je.jsx)(ie.a,{md:3,children:Object(je.jsx)(pe.a,{className:"user-card",children:Object(je.jsxs)(pe.a.Body,{children:[Object(je.jsx)(W.b,{to:"/users/".concat(n._id),children:Object(je.jsx)(gt,{variant:"top",image:n.profileImage||"https://icon-library.com/images/generic-user-icon/generic-user-icon-19.jpg"})}),Object(je.jsx)(pe.a.Title,{children:n.username}),Object(je.jsx)(W.b,{className:"plain-link",to:"/users/".concat(n._id),children:"Visit Profile"}),Object(je.jsx)("br",{}),!h&&!c&&Object(je.jsx)(ue.a,{onClick:function(e){return f(e,ft.createRequest(n._id,m))},variant:"primary",children:"Add Friend"}),("PENDING OWNER"===l||"REJECTED OWNER"===l)&&Object(je.jsx)(ue.a,{onClick:function(e){return f(e,ft.deleteRequest(n._id,m))},variant:"info",style:{color:"white"},children:"Cancel Request"}),("PENDING RECEIVER"===l||"REJECTED RECEIVER"===l)&&Object(je.jsx)(ue.a,{onClick:function(e){return f(e,ft.manageRequest(c._id,"ACCEPTED"))},variant:"primary",style:{marginRight:"10px"},children:"Accept"}),"PENDING RECEIVER"===l&&Object(je.jsx)(ue.a,{onClick:function(e){return f(e,ft.manageRequest(c._id,"REJECTED"))},variant:"primary",children:"Reject"}),h&&Object(je.jsx)(ue.a,{onClick:function(e){return f(e,mt.deleteFriend(n._id))},variant:"danger",style:{color:"white"},children:"Delete Friend"})]})})})},yt=function(e){var t=e.getUsers,n=e.users;return Object(je.jsx)(ae.a,{children:n.map((function(e){return Object(je.jsx)(vt,{user:e,getUsers:t},e._id)}))})},wt=new me,kt=function(){var e=Object(q.useState)(null),t=Object(_.a)(e,2),n=t[0],a=t[1],i=function(){wt.getUsers().then((function(e){return a(e.data)})).catch((function(e){return console.error(e)}))};return Object(q.useEffect)((function(){i()}),[]),Object(je.jsxs)(ne.a,{children:[Object(je.jsx)("h1",{className:"text-center mb-4",children:"Broad Users"}),(null===n||void 0===n?void 0:n.length)?Object(je.jsx)(yt,{getUsers:i,users:n}):Object(je.jsx)("p",{children:"No users to show."})]})},Et=function e(){var t=this;Object(ce.a)(this,e),this.getUserChats=function(){return t.instance.get("/")},this.createChat=function(e){return t.instance.post("/",{otherUserId:e})},this.addMessage=function(e,n){return t.instance.put("/",{message:e,chat:n})},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/chats"),withCredentials:!0})},Ct=new ut,Nt=new Et,Rt=function(e){var t=e.id,n=e.owner,a=e.ownerId,i=e.title,c=e.authors,r=e.image,s=Object(q.useState)(null),o=Object(_.a)(s,2),l=o[0],d=o[1],u=Object(q.useState)(""),j=Object(_.a)(u,2),h=j[0],b=j[1],x=Object(q.useState)(!1),p=Object(_.a)(x,2),O=p[0],g=p[1],m=Object(q.useContext)(V).loggedUser,f=null===m||void 0===m?void 0:m._id,v=Object(te.g)(),y="EXCHANGE";Object(q.useEffect)((function(){E(),k()}),[]),Object(q.useEffect)((function(){R()}),[l]);var w=function(e,t){e.preventDefault(),t.then((function(){E()})).catch((function(e){return console.error(e)}))},k=function(){Nt.getUserChats().then((function(e){return e.data.forEach((function(e){return e.participants.includes(a)&&g(!0)}))})).catch((function(e){return console.error(e)}))},E=function(){Ct.getExchangeRequest(a,t).then((function(e){e.data?d(e.data):(d(null),b(""))})).catch((function(e){return console.error(e)}))},C=function(){return l.owner===f},N=function(){return l.owner===a},R=function(){"PENDING"===(null===l||void 0===l?void 0:l.status)&&C()?b("PENDING OWNER"):"PENDING"===(null===l||void 0===l?void 0:l.status)&&N()?b("PENDING RECEIVER"):"REJECTED"===(null===l||void 0===l?void 0:l.status)&&C()?b("REJECTED OWNER"):"REJECTED"===(null===l||void 0===l?void 0:l.status)&&N()&&b("REJECTED RECEIVER")};return Object(je.jsx)(ie.a,{children:Object(je.jsxs)(pe.a,{style:{height:"100%"},children:[Object(je.jsx)(pe.a.Img,{className:"p-4",style:{maxHeight:"200px",objectFit:"contain"},variant:"top",src:r||ge.bookCover}),Object(je.jsxs)(pe.a.Body,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(je.jsx)(pe.a.Title,{children:(null===i||void 0===i||i.length,i)}),c&&Object(je.jsx)(pe.a.Text,{children:(null===c||void 0===c?void 0:c.length)>1?c.map((function(e,t){return t!==c.length-1?"".concat(e,", "):e})):c[0]}),Object(je.jsx)(pe.a.Text,{children:Object(je.jsxs)("p",{children:["Owner : ",n]})}),!O&&Object(je.jsx)(ue.a,{onClick:function(e){return function(e){e.preventDefault(),Nt.createChat(a).then((function(){return v.push("".concat(ee))})).catch((function(e){return console.error(e)}))}(e)},variant:"info",children:"Start Chat"}),O&&Object(je.jsx)(ue.a,{as:W.b,to:ee,variant:"secondary",children:"Open Chat"}),!l&&Object(je.jsx)(ue.a,{onClick:function(e){return w(e,Ct.createRequest(a,y,{id:t,title:i}))},variant:"primary",className:"mt-2",children:"Send Exchange Request"}),("PENDING OWNER"===h||"REJECTED OWNER"===h)&&Object(je.jsx)(ue.a,{onClick:function(e){return w(e,Ct.deleteRequest(a,y))},variant:"danger",style:{color:"white"},className:"mt-2",children:"Cancel Request"})]})]})})},It=function(e){var t=e.getBooksToExchange,n=e.booksToExchange;return n.length>0&&Object(je.jsx)(ae.a,{xs:1,md:3,className:"g-5 mt-2 mb-5",children:n.map((function(e){return Object(je.jsx)(Rt,Object(H.a)(Object(H.a)({},e),{},{getBooksToExchange:t}),"".concat(e.id," - ").concat(e.owner))}))})},Ft=new me,St=function(e){var t=Object(q.useState)(null),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(q.useState)(""),r=Object(_.a)(c,2),s=(r[0],r[1]);Object(q.useEffect)((function(){o()}),[]);var o=function(){Ft.getBooksToExchange().then((function(e){return i(e.data)})).catch((function(e){return console.error(e)}))};return Object(je.jsxs)(ne.a,{children:[Object(je.jsx)("h1",{className:"mb-5 text-center",children:"Available Books To Exchange"}),Object(je.jsx)(he,{type:"exchange"}),Object(je.jsx)(xe,{type:"exchange",handleRadioClick:function(e){s(e.target.value)}}),(null===a||void 0===a?void 0:a.length)?Object(je.jsx)(It,{getBooksToExchange:o,booksToExchange:a}):Object(je.jsx)("p",{children:"No books available."})]})},Dt=new Ze,Tt=Ee.a.div(C||(C=Object(ke.a)(["\n\nwidth: 90%;\nbackground: #FFFFFF;\ncolor: #000000;\nborder-style:solid;\nborder-width: 1px;\nborder-color: rgba(0, 0, 0, 0.25);\nbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\nborder-radius: 20px;\nfont-style: oblique;\nfont-weight: normal;\nfont-size: 13px;\nline-height: 19px;\nfont-weight:500;\ntext-align:center;\npadding:20px;\nalign-items: center;\nmargin-bottom: 15px;\n"]))),Ut=function(){var e,t,n,a=Object(q.useContext)(V),i=a.loggedUser,c=a.storeUser;return Object(q.useEffect)((function(){Dt.refreshSession().then((function(e){return c(e.data)})).catch((function(e){return console.error(e)}))}),[]),i?Object(je.jsx)(ne.a,{className:"mb-5",style:{height:"100vh",borderRadius:"15px"},children:Object(je.jsxs)(ae.a,{style:{minHeight:"60vh"},children:[Object(je.jsx)(Ot,{className:"col-md-12 header p-5 mb-5"}),Object(je.jsx)("div",{className:"col-md-4 col-sm-12 mb-3",style:{background:"#F4E7DE",height:"100%"},children:Object(je.jsxs)("div",{className:"ml-5 d-flex align-items-center justify-content-between flex-column p-5",style:{background:"#805D93",height:"80%",borderRadius:"15px"},children:[Object(je.jsx)("div",{className:"info",children:Object(je.jsxs)("div",{className:"info mt-2",style:{color:"white",fontSize:"2rem"},children:[Object(je.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(je.jsx)(gt,{image:i.profileImage||"https://icon-library.com/images/generic-user-icon/generic-user-icon-19.jpg"}),Object(je.jsx)("p",{children:i.username}),Object(je.jsxs)(Tt,{children:['"',i.description,'" ',Object(je.jsx)("br",{}),Object(je.jsxs)("div",{style:{textAlign:"right",fontWeight:"800"},children:[" ",i.name]})]})]}),Object(je.jsxs)("p",{children:["Friends: ",null===(e=i.friends)||void 0===e?void 0:e.length]}),Object(je.jsxs)("p",{children:["Read books: ",null===(t=i.books)||void 0===t?void 0:t.filter((function(e){return"READ"===e.status})).length]}),Object(je.jsxs)("p",{children:["Wants to Read: ",null===(n=i.books)||void 0===n?void 0:n.filter((function(e){return"WANTSTOREAD"===e.status})).length]})]})}),Object(je.jsx)(ue.a,{style:{width:"100%",alignSelf:"flex-end"},className:"button-link",as:W.b,to:Z,variant:"secondary",size:"lg",children:" Edit Profile "})]})}),Object(je.jsx)("div",{className:"col-md-8 col-sm-12",style:{background:"#F4E7DE"},children:Object(je.jsxs)("div",{className:"ml-5 p-5 ",style:{background:"#805D93",height:"100%",borderRadius:"15px",color:"white"},children:[Object(je.jsx)("h1",{className:"mb-5",children:"My Books \ud83d\udcda"}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 I Want To Read"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 Reading"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 Read"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"/".concat(i._id,"/exchanged"),children:Object(je.jsx)("h3",{children:"\u2192 Exchanged Books"})})]})})]})}):Object(je.jsx)("h3",{children:"Loading..."})},At=new me,Bt=new at,Lt=function(e){var t=Object(te.g)(),n=Object(q.useContext)(V),a=n.loggedUser,i=n.storeUser,c=Object(q.useState)({name:"",email:"",description:"",profileImage:"",location:""}),r=Object(_.a)(c,2),s=r[0],o=r[1];Object(q.useEffect)((function(){o({name:null===a||void 0===a?void 0:a.name,email:null===a||void 0===a?void 0:a.email,description:null===a||void 0===a?void 0:a.description,profileImage:null===a||void 0===a?void 0:a.profileImage,location:null===a||void 0===a?void 0:a.location})}),[a]);var l=function(e){var t=e.target,n=t.name,a=t.value;o(Object(H.a)(Object(H.a)({},s),{},Object(Xe.a)({},n,a)))};return Object(je.jsx)(ne.a,{className:"d-flex justify-content-center flex-column align-items-center",children:Object(je.jsx)(ae.a,{className:"d-flex justify-content-center",children:Object(je.jsxs)(ie.a,{children:[Object(je.jsx)("h3",{children:"Edit profile"}),Object(je.jsx)(be.a,{onSubmit:function(e){e.preventDefault();var n=s.name,a=s.email,c=s.description,r=s.profileImage,l=s.location;At.editUserInfo(n,a,c,r,l).then((function(e){i(e.data),o({name:"",email:"",description:"",profileImage:"",location:""}),t.push("/profile")})).catch((function(e){return console.error(e)}))},children:Object(je.jsxs)(le.a,{style:{display:"inline-block"},children:[Object(je.jsx)(de.a,{style:{width:"100%",margin:"15px 0px"},placeholder:"Name...","aria-label":"name","aria-describedby":"name",name:"name",type:"text",autoFocus:!0,value:s.name,onChange:l}),Object(je.jsx)(de.a,{style:{width:"100%",margin:"15px 0px"},placeholder:"E-mail...","aria-label":"email","aria-describedby":"email",name:"email",type:"text",autoFocus:!0,value:s.email,onChange:l}),Object(je.jsx)(be.a.Control,{style:{width:"100%",margin:"15px 0px"},placeholder:"Description...","aria-label":"description","aria-describedby":"description",name:"description",type:"text",as:"textarea",rows:6,value:s.description,onChange:l}),Object(je.jsx)(de.a,{style:{width:"100%",margin:"15px 0px"},placeholder:"Location...","aria-label":"location","aria-describedby":"location",name:"location",type:"text",value:s.location,onChange:l}),Object(je.jsx)("p",{children:"Profile image"}),Object(je.jsxs)("div",{className:"d-flex flex-column",children:[Object(je.jsx)("input",{style:{maxWidth:"60vw"},type:"file",id:"profileImage","aria-label":"Profile image",name:"profileImage",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return function(e){o(Object(H.a)(Object(H.a)({},s),{},{isLoading:!0}));var t=new FormData;t.append("imageData",e.target.files[0]),Bt.uploadImg(t).then((function(e){return o(Object(H.a)(Object(H.a)({},s),{},{isLoading:!1,profileImage:e.data.cloudinary_url}))})).catch((function(e){return console.error(e)}))}(e)}}),Object(je.jsx)(ue.a,{size:"sm",style:{marginTop:"15px"},disabled:s.isLoading,type:"submit",variant:"primary",children:"Save Data"})]})]})})]})})})},Pt=n(123),qt=n.n(Pt),Gt=function(e){var t=e.chat,n=e.handleChat,a=e.currentChat,i=Object(q.useContext)(V).loggedUser,c=t.participants.find((function(e){return e!==i._id})),r=new me,s=Object(q.useState)(void 0),o=Object(_.a)(s,2),l=o[0],d=o[1],u=Object(q.useState)(!1),j=Object(_.a)(u,2),h=j[0],b=j[1],x=Object(te.h)(),p=qt.a.parse(x.search);return Object(q.useEffect)((function(){b(t===a)}),[p]),Object(q.useEffect)((function(){i&&r.getUserInfo(c).then((function(e){d(e.data)})).catch((function(e){return console.error(e)}))}),[i]),Object(je.jsx)(je.Fragment,{children:i&&Object(je.jsx)("div",{className:"d-flex",children:Object(je.jsxs)(pe.a,{className:"mb-4",style:{width:"100%"},body:!0,children:[Object(je.jsxs)("h5",{children:["Chat with: ",null===l||void 0===l?void 0:l.username]}),h?Object(je.jsx)(ue.a,{variant:"info",onClick:function(){n(!0,t,l)},children:"Close Chat"}):Object(je.jsx)(ue.a,{onClick:function(){n(!1,t,l)},children:"Open Chat"})]})})})},zt=Ee.a.div(N||(N=Object(ke.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 80vh;\n  background-color: #FFFF;\n  border: 1px solid #cfcfcf;\n  border-radius: 5px;\n    \n  @media(min - width: 320px) and(max - width: 480px) {\n    height: 100 %;\n  };\n\n"]))),Mt=Ee.a.div(R||(R=Object(ke.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  border-radius: 8px;\n  height: 100%;\n  width: 100%;\n    ::-webkit-scrollbar {\n    color: red;\n  }\n  @media(min - width: 320px) and(max - width: 480px) {\n    height: 100 %\n  };\n  @media(min - width: 480px) and(max - width: 1200px) {\n    width: 60 %;\n  };\n"]))),Ht=Ee.a.div(I||(I=Object(ke.a)(["\n  flex: 0.5;\n  display: flex;\n  align-items: center;\n  margin-left: 5%;\n  color: white;\n"]))),_t=Ee.a.div(F||(F=Object(ke.a)(["\n  display: flex;\n  flex: 0.5;\n  justify-content: flex-end;\n  margin-right: 5%;\n"]))),Wt=Ee.a.div(S||(S=Object(ke.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 5%;\n  margin-top: 3px;\n\n"]))),Jt=Ee.a.div(D||(D=Object(ke.a)(["\n  display: inline-block;\n  width: 100%;\n  padding: 5px 20px;\n"]))),Yt=Ee.a.div(T||(T=Object(ke.a)(["\n  display: flex;\n  justify-content: flex-start;\n  padding: 0 5%;\n  margin-top: 3px;\n\n"]))),Vt=Ee.a.div(U||(U=Object(ke.a)(["\n  background: #805d93;\n  color: white;\n  padding: 1rem;\n  border-radius: 8px;\n\n"]))),Kt=Ee.a.div(A||(A=Object(ke.a)(["\n  background: #eaeaea;\n  padding: 1rem;\n  border-radius: 8px;\n"]))),Qt=Ee.a.div(B||(B=Object(ke.a)(["\n  background: #159772;\n  min-width: 100%;\n  padding: 1rem;\n  border-radius: 8px;\n  color: white;\n  text-align: center;\n  top: 0;\n  & p {\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n"]))),Xt=(n(313),function(e){var t=e.otherUser,n=e.handleClick;return Object(je.jsxs)("div",{className:"infoBar",children:[Object(je.jsxs)(Ht,{children:[Object(je.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=",alt:"green light online",className:"onlineIcon"}),Object(je.jsx)("h3",{children:t.username})]}),Object(je.jsx)(_t,{children:Object(je.jsx)("svg",{onClick:function(){return n()},style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"white",class:"bi bi-x",viewBox:"0 0 16 16",children:Object(je.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})})})]})}),Zt=function(e){var t=e.message,n=e.sendMessage,a=e.setMessage;return Object(je.jsx)(be.a.Group,{children:Object(je.jsxs)(ae.a,{id:"chatRow",children:[Object(je.jsx)("div",{className:"col-10",children:Object(je.jsx)(be.a.Control,{style:{resize:"none",width:"100%"},as:"textarea",rows:3,placeholder:"Type a message...",value:t,onChange:function(e){a(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?n(e):null}})}),Object(je.jsx)("div",{className:"col-2",children:Object(je.jsx)(ue.a,{onClick:function(e){return n(e)},style:{width:"100%",height:"100%",padding:"0"},children:"Send"})})]})})},$t=n(271),en=n(128),tn=n.n(en),nn=function(e){var t=e.message;e.otherUser;console.log(t);var n=Object(q.useContext)(V).loggedUser;return Object(je.jsxs)("div",{children:[(t.owner===n._id||t.user===n.username)&&Object(je.jsx)(Wt,{children:Object(je.jsx)(Kt,{className:"mb-4",text:t.text,children:Object(je.jsx)("p",{className:"messageText colorWhite",children:tn.a.emojify(t.text)})})}),"admin"===t.user&&Object(je.jsx)(Qt,{className:"mb-4",text:t.text,children:Object(je.jsx)("p",{className:"messageText colorWhite",children:tn.a.emojify(t.text)})}),t.owner!==n._id&&t.user!==n.username&&"admin"!==t.user&&Object(je.jsx)(Yt,{children:Object(je.jsx)(Vt,{className:"mb-4",children:Object(je.jsx)("p",{className:"sentText colorDark pl-10 mb-4",children:tn.a.emojify(t.text)})})})]})},an=function(e){var t,n=e.messages,a=e.otherUser,i=Object(q.useContext)(V).loggedUser;return Object(je.jsx)($t.a,{initialScrollBehavior:"smooth",mode:"bottom",children:Object(je.jsx)("div",{style:{maxHeight:"60vh"},children:(t=n,t.map((function(e,t){return Object(je.jsx)(nn,{message:e,otherUser:a},"message".concat(i).concat(t))})))})})},cn=n(270),rn=n.n(cn),sn=function(e){var t=e.chat,n=e.otherUser,a=e.handleClick,i="http://localhost:5005",c=Object(te.h)(),r=new Et,s=Object(q.useState)(""),o=Object(_.a)(s,2),l=o[0],d=o[1],u=Object(q.useState)([]),j=Object(_.a)(u,2),h=j[0],b=j[1],x=Object(q.useState)(""),p=Object(_.a)(x,2),O=p[0],g=p[1],m=Object(q.useContext)(V).loggedUser,f=function(e,t){return"db"===t?{text:e.text,owner:e.owner,hasBeenRead:e.hasBeenRead}:"socket"===t?{text:e.text,owner:"",hasBeenRead:!1,user:e.user}:void 0},v=function(){var e=m.username;L=rn()(i,{cors:{origin:"http://localhost:5005",credentials:!0},transports:["websocket"]});var a=[].concat(Object(st.a)(n._id.split("")),Object(st.a)(m._id.split(""))).sort().join("");d("".concat(a)),L.emit("join",{username:e,room:l},(function(){b(t.messages.map((function(e){return f(e,"db")})))}))};return Object(q.useEffect)((function(){if((null===m||void 0===m?void 0:m.username)&&n)return v(),function(){L.disconnect(),L.off(),b([])}}),[i,c.search,m,n]),Object(q.useEffect)((function(){L.on("message",(function(e){!function(e){b([].concat(Object(st.a)(h),[e]))}(f(e,"socket"))}))}),[h]),m?Object(je.jsx)(zt,{children:Object(je.jsxs)(Mt,{children:[Object(je.jsx)(Xt,{otherUser:n,handleClick:a}),Object(je.jsx)(Jt,{children:Object(je.jsx)(an,{style:{backgroundColor:"red"},messages:h,username:m.username,otherUser:n})}),Object(je.jsx)(Zt,{message:O,sendMessage:function(e){e.preventDefault();var n={text:O,owner:m._id};O&&L.emit("sendMessage",O,(function(){g("")})),r.addMessage(n,t._id).then((function(e){return null})).catch((function(e){return console.error(e)}))},setMessage:g})]})}):"Loading..."},on=function(){var e=Object(q.useContext)(V).loggedUser,t=Object(te.h)(),n=qt.a.parse(t.search),a=Object(te.g)(),i=new Et,c=Object(q.useState)([]),r=Object(_.a)(c,2),s=r[0],o=r[1],l=Object(q.useState)(!1),d=Object(_.a)(l,2),u=d[0],j=d[1],h=Object(q.useState)(void 0),b=Object(_.a)(h,2),x=b[0],p=b[1],O=Object(q.useState)(void 0),g=Object(_.a)(O,2),m=g[0],f=g[1],v=function(e,t,n){e?(a.push("/chats"),f(void 0)):e||(f(t),p(n),a.push("/chats?user=".concat(n._id)))},y=function(e){return p(e)};return Object(q.useEffect)((function(){e&&i.getUserChats().then((function(e){o(e.data)})).catch((function(e){return console.error(e)}))}),[e]),Object(q.useEffect)((function(){j(!!n)}),[n]),Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)(ne.a,{children:[Object(je.jsx)("h1",{className:"mb-5",children:"Your chats \ud83d\udcac"}),Object(je.jsxs)(ae.a,{style:{height:"70vh"},children:[Object(je.jsx)(ie.a,{style:{maxHeight:"100%"},md:6,children:s.map((function(e,t){return Object(je.jsx)(Gt,{setIsChatOpen:j,chat:e,currentChat:m,handleChat:v,changeActiveChatUser:y,isChatOpen:u,otherUser:x},"".concat(e,"-").concat(t))}))}),Object(je.jsxs)(ie.a,{style:{maxHeight:"100%"},md:6,children:[u&&m&&Object(je.jsx)(sn,{style:{maxHeight:"100%"},otherUser:x,chat:m,handleClick:function(){a.push("/chats"),f(void 0)}}),!u&&Object(je.jsx)("p",{children:"Chat Animation"})]})]})]})})},ln=function(e){e.owner,e.receiver,e.id;var t=e.title,n=e.authors,a=e.image;e.endDate,e.exchangeId;return Object(je.jsx)(pe.a,{children:Object(je.jsxs)(ae.a,{children:[Object(je.jsx)(ie.a,{md:2,children:Object(je.jsx)(pe.a.Img,{variant:"top",src:a||ge.bookCover})}),Object(je.jsx)(ie.a,{md:10,children:Object(je.jsxs)(pe.a.Body,{children:[Object(je.jsxs)(pe.a.Title,{children:["Title: ",t]}),Object(je.jsx)(pe.a.Text,{children:n&&Object(je.jsxs)("p",{children:["Author: ",n.length>1?n.map((function(e,t){return t!==n.length-1?"".concat(e,", "):e})):n[0]]})}),Object(je.jsx)("br",{})]})})]})})},dn=function(e){var t=e.exchangedBooks,n=e.getExchangedBooks,a=Object(q.useContext)(V).loggedUser,i=null===a||void 0===a?void 0:a._id,c=t.filter((function(e){return e.owner===i})),r=t.filter((function(e){return e.receiver===i})),s=function(e){return e.map((function(e){return Object(je.jsx)(ln,Object(H.a)(Object(H.a)({},e),{},{getExchangedBooks:n}),e._id)}))};return Object(je.jsxs)(je.Fragment,{children:[(null===c||void 0===c?void 0:c.length)>0&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h2",{children:"Lent Books"}),s(c)]}),(null===r||void 0===r?void 0:r.length)>0&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h2",{children:"Borrowed Books"}),s(r)]})]})},un=new function e(){var t=this;Object(ce.a)(this,e),this.getExchangedBooks=function(e){return t.instance.get("/".concat(e))},this.instance=se.a.create({baseURL:"".concat("https://donuts-planet.herokuapp.com/api","/exchanges"),withCredentials:!0})},jn=function(e){var t=Object(q.useState)(null),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(te.i)().id;Object(q.useEffect)((function(){console.log(),r()}),[c]);var r=function(){un.getExchangedBooks(c).then((function(e){return i(e.data)})).catch((function(e){return console.error(e)}))};return Object(je.jsxs)(ne.a,{children:[Object(je.jsx)("h1",{children:"Exchanged Books"}),(null===a||void 0===a?void 0:a.length)?Object(je.jsx)(dn,{getExchangedBooks:r,exchangedBooks:a}):Object(je.jsx)("p",{children:"No books exchanged yet."})]})},hn=new me,bn=function(e){var t=Object(q.useState)(void 0),n=Object(_.a)(t,2),a=n[0],i=n[1],c=Object(te.i)().id;return Object(q.useEffect)((function(){hn.getUserInfo(c).then((function(e){return i(e.data)})).catch((function(e){return console.error(e)}))}),[]),a?Object(je.jsx)(ne.a,{className:"mb-5",style:{height:"100vh",borderRadius:"15px"},children:Object(je.jsxs)(ae.a,{style:{height:"100%"},children:[Object(je.jsx)(Ot,{className:"col-12 header p-5"}),Object(je.jsx)("div",{className:"col-md-4 col-sm-12 mb-3",style:{background:"#F4E7DE",height:"100%"},children:Object(je.jsx)("div",{className:"mr-5 mt-5 d-flex align-items-center justify-content-between flex-column p-5",style:{background:"#805D93",height:"80%",borderRadius:"15px"},children:Object(je.jsxs)("div",{className:"info",children:[Object(je.jsx)(gt,{image:a.profileImage||"https://icon-library.com/images/generic-user-icon/generic-user-icon-19.jpg"}),Object(je.jsxs)("div",{className:"info mt-5",style:{color:"white",fontSize:"2rem"},children:[Object(je.jsxs)("p",{children:["Username: ",a.username]}),"unknown"!==a.name&&Object(je.jsxs)("p",{children:["Name: ",a.name]}),Object(je.jsxs)("p",{children:["Friends: ",a.friends.length]}),Object(je.jsxs)("p",{children:["Books: ",a.books.length]})]})]})})}),Object(je.jsx)("div",{className:"col-md-8 col-sm-12 mt-5",style:{background:"#F4E7DE"},children:Object(je.jsxs)("div",{className:"ml-5 p-5 ",style:{background:"#805D93",height:"100%",borderRadius:"15px",color:"white"},children:[Object(je.jsx)("h1",{className:"mb-5",children:"My Books \ud83d\udcda"}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 I Want To Read"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 Reading"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"#",children:Object(je.jsx)("h3",{children:"\u2192 Read"})}),Object(je.jsx)(W.b,{className:"plain-link-profile",to:"/".concat(c,"/exchanged"),children:Object(je.jsx)("h3",{children:"\u2192 Exchanged Books"})})]})})]})}):Object(je.jsx)("p",{children:"Loading User Details..."})},xn=function(e){var t=e.condition,n=e.urlRedirect,a=e.children;return t?[a]:Object(je.jsx)(te.a,{to:n})},pn=function(e){var t=Object(q.useContext)(V).loggedUser;return Object(je.jsx)(G.a.StrictMode,{children:Object(je.jsxs)(te.d,{children:[Object(je.jsx)(te.b,{exact:!0,path:"/",render:function(){return Object(je.jsx)(Qe,{})}}),Object(je.jsx)(te.b,{exact:!0,path:Q,render:function(){return Object(je.jsx)(et,{})}}),Object(je.jsx)(te.b,{exact:!0,path:K,render:function(){return Object(je.jsx)(nt,{})}}),Object(je.jsxs)(xn,{condition:t,urlRedirect:Q,children:[Object(je.jsx)(te.b,{exact:!0,path:"/signup/info",render:function(){return Object(je.jsx)(rt,{})}}),Object(je.jsx)(te.b,{exact:!0,path:"/signup/genres",render:function(){return Object(je.jsx)(dt,{})}}),Object(je.jsx)(we,{}),Object(je.jsx)(te.b,{exact:!0,path:$,render:function(){return Object(je.jsx)(pt,{})}}),Object(je.jsx)(te.b,{exact:!0,path:"/users",render:function(){return Object(je.jsx)(kt,{})}}),Object(je.jsx)(te.b,{exact:!0,path:X,render:function(){return Object(je.jsx)(Ut,{})}}),Object(je.jsx)(te.b,{exact:!0,path:Z,render:function(){return Object(je.jsx)(Lt,{})}}),Object(je.jsx)(te.b,{exact:!0,path:"/book-exchange",render:function(){return Object(je.jsx)(St,{})}}),Object(je.jsx)(te.b,{path:ee,render:function(){return Object(je.jsx)(on,{})}}),Object(je.jsx)(te.b,{path:"/:id/exchanged",render:function(){return Object(je.jsx)(jn,{})}}),Object(je.jsx)(te.b,{exact:!0,path:"/users/:id",render:function(){return Object(je.jsx)(bn,{})}})]})]})})},On=n.p+"static/media/B.73b496fe.svg",gn=Ee.a.img(P||(P=Object(ke.a)(["\n  height: 30px;\n  width: 30px;\n  position: absolute;\n  left: 15px;\n  top: 12px; \n  filter: invert(100%);\n"]))),mn=function(){return Object(je.jsx)(gn,{src:On,alt:"Broad Logo"})},fn=n(509),vn=n(511),yn=n(508),wn=function(e){var t=new Ze,n=Object(q.useContext)(V),a=n.loggedUser,i=n.storeUser,c=Object(te.g)();return Object(je.jsx)(fn.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",style:{marginBottom:"30px",zIndex:"5"},children:Object(je.jsxs)(ne.a,{fluid:!0,style:{height:"45px"},children:[Object(je.jsx)(fn.a.Brand,{style:{marginTop:"0px",marginRight:"4rem",padding:"0px"},as:W.b,to:"/",children:Object(je.jsx)(mn,{})}),Object(je.jsx)(fn.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(je.jsx)(fn.a.Collapse,{style:{backgroundColor:"#805d93",padding:"5px",borderRadius:"10px",justifyContent:"flex-end"},children:a?Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)(vn.a,{id:"responsive-navbar-nav",className:"me-auto",children:[Object(je.jsx)(vn.a.Link,{as:W.b,to:"/book-exchange",children:"Swap Books!"}),Object(je.jsx)(vn.a.Link,{as:W.b,to:"/book-results/title/+",children:"Discover"}),Object(je.jsx)(vn.a.Link,{as:W.b,to:"/users",children:"Community"})]}),Object(je.jsx)(vn.a,{className:"me-auto",children:Object(je.jsx)(he,{type:"books",id:"toggle-search"})}),Object(je.jsx)(vn.a,{children:Object(je.jsxs)(vn.a.Link,{style:{marginRight:"3rem"},as:W.b,to:X,children:["Welcome ",a.username," \u2661 "]})}),Object(je.jsx)(vn.a,{children:Object(je.jsxs)(yn.a,{title:"Profile",align:"end",children:[Object(je.jsx)(yn.a.Item,{as:W.b,to:X,children:"My Profile"}),Object(je.jsx)(yn.a.Item,{as:W.b,to:$,children:"My Requests"}),Object(je.jsx)(yn.a.Item,{as:W.b,to:ee,children:"My chats"}),Object(je.jsx)(yn.a.Divider,{}),Object(je.jsx)(yn.a.Item,{onClick:function(e){e.preventDefault(),t.logout().then((function(){i(null),c.push("/")})).catch((function(e){return console.error(e)}))},children:"Log Out"})]})})]}):Object(je.jsxs)(vn.a,{children:[Object(je.jsx)(vn.a.Link,{as:W.b,to:Q,children:"Log In"}),Object(je.jsx)(vn.a.Link,{as:W.b,to:K,children:"Sign Up"})]})})]})})},kn=(n(498),new Ze),En=function(e){var t=Object(q.useState)(void 0),n=Object(_.a)(t,2),a=n[0],i=n[1],c=function(e){return i(e)},r=function(){kn.isLoggedIn().then((function(e){return c(e.data)})).catch((function(e){return c(null)}))};return Object(q.useEffect)((function(){r()}),[]),Object(je.jsx)(je.Fragment,{children:Object(je.jsx)(W.a,{children:Object(je.jsxs)(Y,{value:{loggedUser:a,storeUser:c,fetchUser:r},children:[Object(je.jsx)(wn,Object(H.a)({},e)),void 0!==a&&Object(je.jsx)(pn,Object(H.a)({},e))]})})})};M.a.render(Object(je.jsx)(G.a.StrictMode,{children:Object(je.jsx)(W.a,{children:Object(je.jsx)(En,{})})}),document.getElementById("root"))}},[[499,1,2]]]);
//# sourceMappingURL=main.d575d9a8.chunk.js.map